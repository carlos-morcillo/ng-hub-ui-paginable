<ng-container *ngIf="!rows">
	<div class="d-flex justify-content-center">
		<div class="spinner-border m-4" style="width: 3rem; height: 3rem;" role="status">
			<span class="sr-only">Loading...</span>
		</div>
	</div>
</ng-container>

<ng-container *ngIf="rows && showSearchInput">
	<div class="row">
		<div class="col-xs-12 offset-md-6 col-md-6">
			<div class="input-group mb-3">
				<input type="text" class="form-control" [(ngModel)]="searchText" placeholder="Buscar"
					aria-label="Buscar" (keyup.enter)="filter()">
				<div class="input-group-append">
					<button class="btn btn-secondary" type="button" (click)="filter()">
						<i class="fa fa-search" aria-hidden="true"></i>
					</button>
				</div>
			</div>
		</div>
	</div>
</ng-container>

<ng-container *ngIf="pagination.itemsToShow && !pagination.itemsToShow.length"
	[ngTemplateOutlet]="templateNotFound || defaultTemplateNotFound">
</ng-container>

<ng-container *ngIf="pagination.itemsToShow?.length">
	<nb-table-sorter-paginator *ngIf="limit && (paginationPosition == 'top' || paginationPosition === 'both')"
		[pagination]="pagination"></nb-table-sorter-paginator>

	<table class="table table-striped table-inverse table-responsive-sm">
		<thead>
			<tr>
				<th *ngFor="let item of headers" [ngClass]="'text-' + (item.align || 'text-left')">
					<ng-container *ngIf="item | isObject">
						<i class="fa fa-{{ item.icon }}" [ngClass]="{'fa-fw': item.title}" *ngIf="item.icon"
							aria-hidden="true"></i>
						<span *ngIf="item.title">{{ item.title | ucfirst }}</span>
					</ng-container>
					<ng-container *ngIf="item | isString">
						{{ item | ucfirst }}
					</ng-container>
				</th>
				<th *ngIf="options"></th>
			</tr>
		</thead>

		<tbody>
			<ng-container *ngFor="let item of pagination.itemsToShow; let i=index">
				<tr (click)="itemClicked($event, item)">
					<ng-container [ngTemplateOutlet]="normalTemplate || defaultTemplateOptionNotFound"
						[ngTemplateOutletContext]="{$implicit: item}"></ng-container>
					<!-- <td *ngIf="options" class="text-center">
						<div *ngIf="item[options?.option]?.length" (click)="item['expanded'] = !item['expanded']">
							<i class="fa" [ngClass]="(item['expanded']) ? 'fa-sort-up' : 'fa-sort-down'"></i>
						</div>
					</td> -->
				</tr>

				<!-- <div *ngIf="item[options?.option]?.length && item['expanded']" class="text-center">
					<p *ngFor="let option of item[options?.option]">
						<span *ngFor="let prop of options?.props; let j = index">
							<strong *ngIf="j === 0">
								{{ option[prop] | valueOrDate : 'DD-MM-YYYY' }}:
							</strong>
							<span *ngIf="j > 0">
								{{ option[prop] | valueOrDate : 'HH:mm' }}
							</span>
						</span>
					</p>
				</div> -->
			</ng-container>
		</tbody>
	</table>
	<p class="text-right" *ngIf="paginationInfo">
		<small class="text-muted">Mostrando {{ pagination.itemsToShow.length }} de {{ pagination.total }}
			registros</small>
	</p>
	<nb-table-sorter-paginator *ngIf="limit && (paginationPosition == 'bottom' || paginationPosition === 'both')"
		[pagination]="pagination"></nb-table-sorter-paginator>

	<!-- <nav aria-label="Pagination" class="text-right" *ngIf="pages">
    <ul class="pagination">
      <li class="page-item" [ngClass]="{'disabled': page <= 1}">
        <a class="page-link" href="javascript:{}" (click)="page = page - 1;">Anterior</a>
      </li>
      <li class="page-item" *ngFor="let item of pages" [ngClass]="{'active': item === page}">
        <a class="page-link" (click)="page = item">{{ item }}</a>
      </li>
      <li class="page-item" [ngClass]="{'disabled': pages.length >= page}">
        <a class="page-link" href="javascript:{}" (click)="page = page + 1;">Siguiente</a>
      </li>
    </ul>
  </nav> -->
</ng-container>

<ng-template #defaultTemplateOptionNotFound let-item>
	<td *ngFor="let header of headers">
		{{ item | get : (header?.property || header) }}
	</td>
</ng-template>

<ng-template #normalTemplate let-item>
	<td *ngFor="let header of headers">
		{{ item | get : (header?.property || header) }}
	</td>
</ng-template>

<ng-template #defaultTemplateNotFound>
	<div class="alert alert-warning" role="alert">
		<i class="fa fa-fw fa-info-circle" aria-hidden="true"></i> No se han encontrado resultados
	</div>
</ng-template>