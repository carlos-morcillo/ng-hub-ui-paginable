<div class="table-dropdown" [class.table-dropdown--open]="shown">
	<button
		class="table-dropdown__toggle px-2 dropdown-toggle"
		type="button"
		[ngClass]="buttonClass"
		[attr.title]="options.tooltip"
		[attr.aria-expanded]="shown"
		(click)="toggle(); $event.stopPropagation()"
		[disabled]="disabled()"
	>
		<div class="table-dropdown__toggle-content d-flex flex-nowrap align-items-center gap-1">
			<i class="table-dropdown__icon hub-table__icon" [ngClass]="options.icon || 'hub-table__icon--ellipsis-v'"></i>
			@if (options.title) {
				<span class="table-dropdown__title">{{ options.title }}</span>
			}
		</div>
	</button>
	<ng-template #dropdownTpt>
		<div
			class="table-dropdown__menu dropdown-menu dropdown-menu-{{ options.position }}"
			[class.show]="shown"
			[ngStyle]="{
				right:
					options.position == 'end' || options.position === 'right'
						? 0
						: 'initial'
			}"
		>
			@for (dropdownItem of options.buttons; track dropdownItem) {
				@if (!dropdownItem.hidden) {
					<button
						class="table-dropdown__item dropdown-item"
						type="button"
						[attr.title]="dropdownItem.title | unwrapAsync"
						[ngClass]="
							dropdownItem.color
								? 'text-' + dropdownItem.color
								: 'text-dark'
						"
						(click)="
							row() &&
								dropdownItem.handler &&
								dropdownItem.handler(row())
						"
					>
						<div class="table-dropdown__item-content d-flex align-items-center gap-2">
							<ng-hub-ui-icon
								class="table-dropdown__item-icon"
								[config]="dropdownItem.icon"
							></ng-hub-ui-icon>
							@if (dropdownItem.label) {
								<span class="table-dropdown__item-label">{{ dropdownItem.label | unwrapAsync }}</span>
							}
						</div>
					</button>
				}
			}
		</div>
	</ng-template>
</div>
